Drupal.st56mapa.layers.vector=function(e,t,a,r){var s={ignoreExtraDims:!0,internalProjection:e.projection,externalProjection:new OpenLayers.Projection(a.crs)},l={visibility:1==a.visible,projection:new OpenLayers.Projection(a.crs),reportError:!1,attribution:a.attribution?a.attribution:""},i=new OpenLayers.Layer.Vector(a.name,l);if("notas"==a.idname){var n=JSON.parse(localStorage.getItem(r));if(n){var o=(new OpenLayers.Format.GeoJSON).read(n);i.addFeatures(o)}}else jQuery.ajax({url:a.url+"/"+a.crs,type:"POST",data:{DATOS:a.datos,SRS:a.crs},success:function(e){var t=new OpenLayers.Format.GeoJSON(s).read(e);i.addFeatures(t)},dataType:"json"});1==a.seleccionable&&t.olcapasseleccionables.push(i);var u={},c=a.estilo_name;switch(a.estilo_tipo){case"0":(u=new OpenLayers.StyleMap({default:t.estilos[c]})).styles.default.title=u.styles.default.defaultStyle.title;break;case"1":(u=new OpenLayers.StyleMap).addUniqueValueRules("default",a.estilo_id,t.estilos[c]),jQuery.each(u.styles.default.rules,function(e,t){u.styles.default.rules[e].title=t.symbolizer.title})}return i.styleMap=u,i};