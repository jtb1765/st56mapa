!function(e){Drupal.behaviors.st56mapa_control_midedistancia={attach:function(a,t){e(".jmapas-map").once("jmapas-control-midedistancia",function(){var a=e(this).data("st56mapa").map,r=t.st56mapa.map_datos,n=r.containers.olmidedistancia,o=r.controles[n].olmidedistancia.opciones,s=r.estilos[o.style],i=new OpenLayers.Style;i.addRules([new OpenLayers.Rule({symbolizer:s})]);var l=new OpenLayers.StyleMap({default:i}),p=OpenLayers.Util.getParameters(window.location.href).renderer;p=p?[p]:OpenLayers.Layer.Vector.prototype.renderers;var d=new OpenLayers.Control.Measure(OpenLayers.Handler.Path,{persist:"true"==o.persist,immediate:"true"==o.immediate,geodesic:"true"==o.geodesic,handlerOptions:{layerOptions:{renderers:p,styleMap:l}},eventListeners:{deactivate:function(){this.deactivate()}}});d.events.on({measure:function(e){Drupal.st56mapa.handleMeasurements(e,a)},activate:function(e){Drupal.st56mapa.borrarMedidas()}}),a.addControl(d),r[n].push(new GeoExt.Action({control:d,map:a,toggleGroup:"jtbgxtoolbar",allowDepress:!1,tooltip:o.title,tooltipType:"title",activateOnEnable:!0,deactivateOnDisable:!0,iconCls:"olControlMeasureItemActive",group:"jtbgxtoolbar"}))})}}}(jQuery);