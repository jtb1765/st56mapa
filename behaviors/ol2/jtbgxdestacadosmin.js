!function(a){Drupal.behaviors.st56mapa_control_jtbgxdestacados={attach:function(t,e){a(".jmapas-map").once("jmapas-control-jtbgxdestacados",function(){var t=a(this).data("st56mapa").map,o=e.st56mapa.map_datos,s=o.containers.jtbgxdestacados;o.controles[s].jtbgxdestacados;a.each(o.destacados,function(e,n){var r=o.listadedestacados[e].label,l=[];a.each(n,function(a,t){var e=[t.name,parseFloat(t.lon),parseFloat(t.lat),parseFloat(t.zoom),t.srs];l.push(e)});var d=new Ext.data.ArrayStore({fields:["name","lon","lat","zoom","srs"],idIndex:0});d.loadData(l);var c=new Ext.form.ComboBox({store:d,emptyText:r,tpl:'<tpl for="."><div class="x-combo-list-item">{[values.name]}</div></tpl>',editable:!1,triggerAction:"all",mode:"local",cls:"jtbgxdestacado"});c.on("select",function(a,e,o){var s=new OpenLayers.Geometry.Point(e.data.lon,e.data.lat);e.data.srs!=t.projection&&s.transform(new OpenLayers.Projection(e.data.srs),t.projection),t.setCenter(new OpenLayers.LonLat(s.x,s.y),e.data.zoom),c.setValue(e.data.name)},this),t.events.register("zoomend",this,function(){c.clearValue()}),o[s].push(c)})})}}}(jQuery);